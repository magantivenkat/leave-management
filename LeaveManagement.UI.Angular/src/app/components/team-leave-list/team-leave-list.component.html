<div class="container">
  <h3 class="mb-4">Team Leave Requests</h3>

  <div *ngIf="loading" class="alert alert-info">Loadingâ€¦</div>
  <div *ngIf="error" class="alert alert-danger">{{ error }}</div>

  <div class="table-responsive">
    <table class="table table-striped table-hover shadow-sm rounded">
      <thead class="table-light">
        <tr>
          <th>User</th>
          <th>From</th>
          <th>To</th>
          <th>Days</th>
          <th>Status</th>
          <th class="text-center">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let r of requests">
          <td>{{ r.userName }}</td>
          <td>{{ r.startDate }}</td>
          <td>{{ r.endDate }}</td>
          <td>{{ r.days }}</td>
          <td>
            <span
              class="badge"
              [ngClass]="{
                'bg-warning text-dark': r.status==='Pending',
                'bg-success': r.status==='Approved',
                'bg-danger': r.status==='Rejected'
              }"
            >
              {{ r.status }}
            </span>
          </td>
          <td class="text-center">
            <button
              class="btn btn-sm btn-success me-2"
              (click)="approve(r)"
              [disabled]="r.status!=='Pending'"
            >Approve</button>
            <button
              class="btn btn-sm btn-danger"
              (click)="reject(r)"
              [disabled]="r.status!=='Pending'"
            >Reject</button>
          </td>
        </tr>
        <tr *ngIf="!loading && requests.length===0">
          <td colspan="6" class="text-center text-muted py-4">
            No subordinate requests found.
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
